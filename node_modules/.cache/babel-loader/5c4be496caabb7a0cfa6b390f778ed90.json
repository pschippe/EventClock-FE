{"ast":null,"code":"import _defineProperty from \"/Users/patrickschippers/DEV/SideProj/ClockControl/sandBox/EventClock-FE/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/patrickschippers/DEV/SideProj/ClockControl/sandBox/EventClock-FE/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/patrickschippers/DEV/SideProj/ClockControl/sandBox/EventClock-FE/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/patrickschippers/DEV/SideProj/ClockControl/sandBox/EventClock-FE/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/patrickschippers/DEV/SideProj/ClockControl/sandBox/EventClock-FE/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/patrickschippers/DEV/SideProj/ClockControl/sandBox/EventClock-FE/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/patrickschippers/DEV/SideProj/ClockControl/sandBox/EventClock-FE/src/components/Countdown.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from \"react\";\nimport { connect } from 'react-redux';\nimport mapReduxStoreToProps from '../redux/mapReduxStoreToProps';\nimport Api from '../api';\n\nvar Countdown =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Countdown, _Component);\n\n  function Countdown() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Countdown);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Countdown)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      timerOn: false,\n      timerStart: 0,\n      timerTime: 0,\n      timerID: '',\n      inputHrs: 0,\n      inputMin: 0,\n      inputSec: 0\n    };\n\n    _this.preStart = function () {\n      _this.setState({\n        timerTime: _this.props.store.currentTime.timerTime\n      }, function () {\n        // Setting up post for api call, needs to match endpoint titles and information\n        Api.postTime(_objectSpread({}, _this.props.store.currentTime, {\n          id: _this.props.id,\n          status: 'start'\n        })) // Then is a response to make sure that it was successful to hit api\n        .then(function (response) {\n          window.setTimeout(function () {\n            _this.startTimer();\n          }, 2000);\n        }) // Catch is an error... its just an error\n        .catch(function (error) {\n          console.log('Error on preStart for Countdown.js', error);\n        }); // Remove when endpoints are working\n\n        window.setTimeout(function () {\n          _this.startTimer();\n        }, 2000);\n      });\n    };\n\n    _this.startTimer = function () {\n      // TODO: Use npm install \"axios\" for ajax call to backend\n      _this.setState({\n        timerOn: true,\n        timerStart: _this.state.timerTime\n      });\n\n      _this.timer = setInterval(function () {\n        var newTime = _this.state.timerTime - 10;\n\n        if (newTime >= 0) {\n          _this.setState({\n            timerTime: newTime\n          });\n        } else {\n          clearInterval(_this.timer);\n\n          _this.setState({\n            timerOn: false\n          });\n\n          alert(\"Countdown Ended\");\n        }\n      }, 10);\n    };\n\n    _this.stopTimer = function () {\n      clearInterval(_this.timer);\n\n      _this.setState({\n        timerOn: false\n      });\n    };\n\n    _this.resetTimer = function () {\n      _this.setState({\n        timerTime: _this.state.timerStart\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Countdown, [{\n    key: \"startForMaster\",\n    value: function startForMaster() {\n      this.props.resetMasterCallback();\n      this.preStart();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          timerTime = _this$state.timerTime,\n          timerStart = _this$state.timerStart,\n          timerOn = _this$state.timerOn;\n      var disableButtons = false;\n\n      if (this.props.store.masterTime.timerOn === true) {\n        timerTime = this.props.store.masterTime.timerCount;\n        timerStart = this.props.store.masterTime.timerStart;\n        timerOn = this.props.store.masterTime.timerOn;\n        disableButtons = true;\n      }\n\n      var seconds = (\"0\" + Math.floor(timerTime / 1000 % 60) % 60).slice(-2);\n      var minutes = (\"0\" + Math.floor(timerTime / 60000 % 60)).slice(-2);\n      var hours = (\"0\" + Math.floor(timerTime / 3600000 % 60)).slice(-2);\n      return React.createElement(\"div\", {\n        id: this.props.id,\n        className: \"roomClock\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"roomClock-hd\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, this.props.id), React.createElement(\"div\", {\n        className: \"roomClock-bd\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"timer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"timer-display\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, hours, \" : \", minutes, \" : \", seconds), React.createElement(\"div\", {\n        className: \"timer-control\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, timerOn === false && (timerStart === 0 || timerTime === timerStart) && React.createElement(\"button\", {\n        className: \"btn btn_start\",\n        onClick: this.preStart,\n        disabled: disableButtons,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, \"Start\"), timerOn === true && timerTime >= 1000 && React.createElement(\"button\", {\n        className: \"btn btn_stop\",\n        onClick: this.stopTimer,\n        disabled: disableButtons,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, \"Stop\"), timerOn === false && timerStart !== 0 && timerStart !== timerTime && timerTime !== 0 && React.createElement(\"button\", {\n        className: \"btn btn_start\",\n        onClick: this.startTimer,\n        disabled: disableButtons,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, \"Resume\"), (timerOn === false || timerTime < 1000) && React.createElement(\"button\", {\n        className: \"btn btn_reset\",\n        onClick: this.resetTimer,\n        disabled: disableButtons,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, \"Reset\")))));\n    }\n  }]);\n\n  return Countdown;\n}(Component);\n\nexport default connect(mapReduxStoreToProps)(Countdown);","map":{"version":3,"sources":["/Users/patrickschippers/DEV/SideProj/ClockControl/sandBox/EventClock-FE/src/components/Countdown.js"],"names":["React","Component","connect","mapReduxStoreToProps","Api","Countdown","state","timerOn","timerStart","timerTime","timerID","inputHrs","inputMin","inputSec","preStart","setState","props","store","currentTime","postTime","id","status","then","response","window","setTimeout","startTimer","catch","error","console","log","timer","setInterval","newTime","clearInterval","alert","stopTimer","resetTimer","resetMasterCallback","disableButtons","masterTime","timerCount","seconds","Math","floor","slice","minutes","hours"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from 'react-redux';\nimport mapReduxStoreToProps from '../redux/mapReduxStoreToProps';\nimport Api from '../api';\n\nclass Countdown extends Component {\n  state = {\n    timerOn: false,\n    timerStart: 0,\n    timerTime: 0,\n    timerID: '',\n    inputHrs: 0,\n    inputMin: 0,\n    inputSec: 0,\n  };\n\n  preStart = () => {\n    this.setState({\n      timerTime: this.props.store.currentTime.timerTime,\n    }, () => {\n      // Setting up post for api call, needs to match endpoint titles and information\n      Api.postTime({\n        ...this.props.store.currentTime,\n        id: this.props.id,\n        status: 'start'\n      })\n      // Then is a response to make sure that it was successful to hit api\n      .then((response) => {\n        window.setTimeout(() => {\n          this.startTimer()\n        }, 2000);\n      })\n      // Catch is an error... its just an error\n      .catch((error) => {\n        console.log('Error on preStart for Countdown.js', error);\n      });\n      // Remove when endpoints are working\n      window.setTimeout(() => {\n        this.startTimer()\n      }, 2000);\n    });\n  }\n\n  startTimer = () => {\n    // TODO: Use npm install \"axios\" for ajax call to backend\n    this.setState({\n      timerOn: true,\n      timerStart: this.state.timerTime\n    });\n    \n    this.timer = setInterval(() => {\n      const newTime = this.state.timerTime - 10;\n      if (newTime >= 0) {\n        this.setState({\n          timerTime: newTime\n        });\n      } else {\n        clearInterval(this.timer);\n        this.setState({ timerOn: false });\n        alert(\"Countdown Ended\");\n      }\n    }, 10);\n  };\n\n  stopTimer = () => {\n    clearInterval(this.timer);\n    this.setState({ timerOn: false });\n  };\n\n  resetTimer = () => {\n    this.setState({\n      timerTime: this.state.timerStart\n    });\n  };\n\n  startForMaster() {\n    this.props.resetMasterCallback();\n    this.preStart();\n  }\n\n  render() {\n    let { timerTime, timerStart, timerOn } = this.state;\n    let disableButtons = false;\n\n    if (this.props.store.masterTime.timerOn === true) {\n      timerTime = this.props.store.masterTime.timerCount;\n      timerStart = this.props.store.masterTime.timerStart;\n      timerOn = this.props.store.masterTime.timerOn;\n      disableButtons = true;\n    }\n    \n    let seconds = (\"0\" + (Math.floor((timerTime / 1000) % 60) % 60)).slice(-2);\n    let minutes = (\"0\" + Math.floor((timerTime / 60000) % 60)).slice(-2);\n    let hours = (\"0\" + Math.floor((timerTime / 3600000) % 60)).slice(-2);\n\n    return (\n      <div id={this.props.id} className=\"roomClock\">\n        <div className=\"roomClock-hd\">{this.props.id}</div>\n        <div className=\"roomClock-bd\">\n          <div className=\"timer\">\n            <div className=\"timer-display\">\n              {hours} : {minutes} : {seconds}\n            </div>\n            <div className=\"timer-control\">\n              {timerOn === false &&\n                (timerStart === 0 || timerTime === timerStart) && (\n                  <button className=\"btn btn_start\" onClick={this.preStart} disabled={disableButtons}>Start</button>\n                )}\n              {timerOn === true && timerTime >= 1000 && (\n                <button className=\"btn btn_stop\" onClick={this.stopTimer} disabled={disableButtons}>Stop</button>\n              )}\n              {timerOn === false &&\n                (timerStart !== 0 && timerStart !== timerTime && timerTime !== 0) && (\n                  <button className=\"btn btn_start\" onClick={this.startTimer} disabled={disableButtons}>Resume</button>\n                )}\n              {(timerOn === false || timerTime < 1000) && (\n                <button className=\"btn btn_reset\" onClick={this.resetTimer} disabled={disableButtons}>Reset</button>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default connect(mapReduxStoreToProps)(Countdown);\n"]},"metadata":{},"sourceType":"module"}